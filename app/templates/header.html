<header>
    <!-- First line: App name centered -->
    <div style="width: 100%; text-align: center; padding: 16px 0 4px 0;">
        <h1 style="margin: 0;">Student Management System</h1>
    </div>
    <!-- Second line: Menu left, user right -->
    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0 32px 8px 32px;">
        <nav style="display: flex; gap: 20px;">
            {% if request.session.get("user_id") %}
                <a href="/home">Home</a>
                {% if request.session.get("role") == "Administrator" %}
                    <a href="/manage/person_search">Person Search</a>
                {% endif %}
            {% endif %}
        </nav>
        <div>
            {% if request.session.get("user_id") %}
                <div style="position: relative; display: inline-block;">
                    <span style="cursor: pointer;" onclick="toggleUserMenu()">
                        {{ request.session.get('username') }} &#x25BC;
                    </span>
                    <div id="userDropdown" style="display: none; position: absolute; right: 0; background: #fff; border: 1px solid #ccc; min-width: 120px; z-index: 100;">
                        <a href="/logout" style="display: block; padding: 8px 16px; text-decoration: none; color: #333;">Logout</a>
                    </div>
                </div>
                <script>
                    function toggleUserMenu() {
                        var menu = document.getElementById('userDropdown');
                        menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
                    }
                    // Hide dropdown when clicking outside
                    document.addEventListener('click', function(event) {
                        var dropdown = document.getElementById('userDropdown');
                        if (dropdown && !dropdown.contains(event.target) && event.target.innerText !== '{{ request.session.get('username') }} â–¼') {
                            dropdown.style.display = 'none';
                        }
                    });
                </script>
            {% endif %}
        </div>
    </div>
</header>
<script src="{{ request.url_for('static', path='js/common/header.js') }}"></script>